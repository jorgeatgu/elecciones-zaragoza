const districtStack=(t,a)=>{const e=24,s=8,c=24,r=32;let n=0,o=0;const i=d3.select(`.district-zgz-${a}`),l=i.select("svg"),d={};let p;const x=d3.bisector(t=>t.year).left,u=i.append("div").attr("class","tooltip tooltip-stack").style("opacity",0),m=t=>{const p=i.node().offsetWidth;n=p-r-s,o=400-e-c,l.attr("width",p).attr("height",400);const m=`translate(${r},${e})`,v=l.select(`.district-zgz-${a}-container`);v.attr("transform",m),v.append("rect").attr("class","overlay-dos"),v.append("g").attr("class","focus").style("display","none").append("line").attr("class","x-hover-line hover-line").attr("y1",0);const y=t.columns.slice(1),f=d3.area().x((t,a)=>d.count.x(t.data.year)).y0(t=>d.count.y(t[0])).y1(t=>d.count.y(t[1])).curve(d3.curveCardinal.tension(.6)),g=d3.stack().keys(y).order(d3.stackOrderInsideOut)(t),h=d3.scaleOrdinal().domain(y).range(["#00B6FE","#E00F20"]);((t,a)=>{d.count.x.range([0,t]),d.count.y.range([a,0])})(n,o);const k=i.select(`.district-zgz-${a}-container-bis`).selectAll(".area-stack").data(g),$=k.enter().append("path").attr("class","area-stack");k.merge($).transition().duration(600).ease(d3.easeLinear).style("fill",t=>h(t.key)).attr("d",f);const L=v.select(".focus"),z=v.select(".overlay-dos");L.select(".x-hover-line").attr("y2",o),z.attr("width",n+r+s).attr("height",o).on("mouseover",function(){L.style("display",null)}).on("mouseout",function(){L.style("display","none"),u.style("opacity",0)}).on("mousemove",function(){i.node().offsetWidth;var a=d.count.x.invert(d3.mouse(this)[0]),e=x(t,a,1),s=t[e-1],c=t[e],r=a-s.year>c.year-a?c:s;const n=d.count.x(r.year);u.style("opacity",1).html(`\n                          <span class="tooltip-stack-number tooltip-stack-text">${r.year}</span>\n                          <span class="tooltip-stack-text">PP: <span class="tooltip-number">${r.pp}%</span></span>\n                          <span class="tooltip-stack-text">PSOE: <span class="tooltip-number">${r.psoe}%</span></span>\n                          `).style("top","25%").style("left",n+"px"),L.select(".x-hover-line").attr("transform",`translate(${d.count.x(r.year)},0)`)}),(t=>{const a=d3.axisBottom(d.count.x).tickFormat(d3.format("d")).tickPadding(7).ticks(10);t.select(".axis-x").attr("transform",`translate(0,${o})`).call(a);const e=d3.axisLeft(d.count.y).tickFormat(t=>t+"%").tickSizeInner(-n).ticks(12);t.select(".axis-y").call(e)})(v)};window.addEventListener("resize",()=>{m(p)}),d3.csv(t,(t,e)=>{t?console.log(t):((p=e).forEach(t=>{t.year=t.year,t.pp=t.pp,t.psoe=t.psoe}),(()=>{const t=l.select(`.district-zgz-${a}-container`);t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","axis axis-y"),t.append("g").attr("class",`district-zgz-${a}-container-bis`)})(),(()=>{const t=d3.scaleTime().domain(d3.extent(p,t=>t.year)),a=d3.scaleLinear().domain([0,100]);d.count={x:t,y:a}})(),m(p))})},totalParties=[["csv/total-actur.csv","actur"],["csv/total-aljaferia.csv","aljaferia"],["csv/total-casco.csv","casco"],["csv/total-centro.csv","centro"],["csv/total-delicias.csv","delicias"],["csv/total-las-fuentes.csv","las-fuentes"],["csv/total-san-jose.csv","san-jose"],["csv/total-torrero.csv","torrero"],["csv/total-universidad.csv","universidad"],["csv/total-via-hispanidad.csv","via-hispanidad"],["csv/total-zona-norte.csv","zona-norte"],["csv/total-zona-oeste.csv","zona-oeste"]];for(const t of totalParties)districtStack(...t);function directionalDot(){const t=48,a=16,e=32,s=82;let c=0,r=0;const n=d3.select(".chart-diff"),o=n.select("svg"),i={};let l;const d=l=>{const d=n.node().offsetWidth;c=d-s-a,r=600-t-e,o.attr("width",d).attr("height",600);const p=`translate(${s},${t})`,x=o.select(".chart-diff-container");x.attr("transform",p),((t,a)=>{i.count.x.range([15,t]),i.count.y.range([0,a-e])})(c,r);const u=n.select(".chart-diff-container-bis"),m=u.selectAll(".circle-pp").data(l);m.exit().remove();const v=u.selectAll(".circle-psoe").data(l);v.exit().remove();const y=u.selectAll(".circle-up").data(l);y.exit().remove();const f=u.selectAll(".circle-cs").data(l);f.exit().remove();const g=u.selectAll(".circle-vox").data(l);g.exit().remove();const h=m.enter().append("circle").attr("class","circle-PP"),k=v.enter().append("circle").attr("class","circle-PSOE"),$=y.enter().append("circle").attr("class","circle-UP"),L=f.enter().append("circle").attr("class","circle-CIUDADANOS"),z=g.enter().append("circle").attr("class","circle-VOX");m.merge(h).transition().duration(500).ease(d3.easeLinear).attr("r",6).attr("cy",t=>i.count.y(t.distrito)+20).attr("cx",t=>i.count.x(t.pp)),v.merge(k).transition().duration(500).ease(d3.easeLinear).attr("r",6).attr("cy",t=>i.count.y(t.distrito)+20).attr("cx",t=>i.count.x(t.psoe)),y.merge($).transition().duration(500).ease(d3.easeLinear).attr("r",6).attr("cy",t=>i.count.y(t.distrito)+20).attr("cx",t=>i.count.x(t.up)),f.merge(L).transition().duration(500).ease(d3.easeLinear).attr("r",6).attr("cy",t=>i.count.y(t.distrito)+20).attr("cx",t=>i.count.x(t.ciudadanos)),g.merge(z).transition().duration(500).ease(d3.easeLinear).attr("r",6).attr("cy",t=>i.count.y(t.distrito)+20).attr("cx",t=>i.count.x(t.vox));const w=o.selectAll(".label").data(l).enter().append("g").attr("class",t=>t.labels+" container-labels").attr("transform",(t,a)=>`translate(${100*a},-160)`);w.append("rect").attr("x",s+20).attr("y",s-8).attr("width",16).attr("height",16).attr("class","legend-rect"),w.append("text").attr("class","legend-text").attr("x",s+40).attr("y",s).attr("dy",".35em").text(t=>t.labels),(t=>{const a=d3.axisBottom(i.count.x).tickPadding(15).tickFormat(t=>t+"%").ticks(12).tickSizeInner(-r);t.select(".axis-x").attr("transform",`translate(0,${r})`).transition().duration(500).ease(d3.easeLinear).call(a);const e=d3.axisLeft(i.count.y).tickPadding(5).tickFormat(t=>t).ticks(15).tickSizeInner(-c);t.select(".axis-y").transition().duration(500).ease(d3.easeLinear).call(e)})(x)};window.addEventListener("resize",()=>{d(l)}),d3.csv("csv/cis.csv",(t,a)=>{t?console.log(t):((l=a).forEach(t=>{t.pp=+t.pp}),(()=>{const t=o.select(".chart-diff-container");t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","axis axis-y"),t.append("g").attr("class","chart-diff-container-bis")})(),(()=>{const t=d3.scaleLinear().domain([0,60]),a=d3.scaleBand().domain(l.map(t=>t.distrito));i.count={x:t,y:a}})(),d(l))})}directionalDot();const araStack=(t,a)=>{const e=24,s=8,c=24,r=32;let n=0,o=0;const i=d3.select(`.district-ara-${a}`),l=i.select("svg"),d={};let p;const x=d3.bisector(t=>t.year).left,u=i.append("div").attr("class","tooltip tooltip-stack").style("opacity",0),m=t=>{const p=i.node().offsetWidth;n=p-r-s,o=300-e-c,l.attr("width",p).attr("height",300);const m=`translate(${r},${e})`,v=l.select(`.district-ara-${a}-container`);v.attr("transform",m),v.append("rect").attr("class","overlay-dos"),v.append("g").attr("class","focus").style("display","none").append("line").attr("class","x-hover-line hover-line").attr("y1",0);const y=t.columns.slice(1),f=d3.area().x((t,a)=>d.count.x(t.data.year)).y0(t=>d.count.y(t[0])).y1(t=>d.count.y(t[1])).curve(d3.curveCardinal.tension(.6)),g=d3.stack().keys(y).order(d3.stackOrderInsideOut)(t),h=d3.scaleOrdinal().domain(y).range(["#BC0712","#F7CE57"]);((t,a)=>{d.count.x.range([0,t]),d.count.y.range([a,0])})(n,o);const k=i.select(`.district-ara-${a}-container-bis`).selectAll(".area-stack").data(g),$=k.enter().append("path").attr("class","area-stack");k.merge($).transition().duration(600).ease(d3.easeLinear).style("fill",t=>h(t.key)).attr("d",f);const L=v.select(".focus"),z=v.select(".overlay-dos");L.select(".x-hover-line").attr("y2",o),z.attr("width",n+r+s).attr("height",o).on("mouseover",function(){L.style("display",null)}).on("mouseout",function(){L.style("display","none"),u.style("opacity",0)}).on("mousemove",function(){i.node().offsetWidth;var a=d.count.x.invert(d3.mouse(this)[0]),e=x(t,a,1),s=t[e-1],c=t[e],r=a-s.year>c.year-a?c:s;const n=d.count.x(r.year);u.style("opacity",1).html(`\n                          <span class="tooltip-stack-number tooltip-stack-text">${r.year}</span>\n                          <span class="tooltip-stack-text">PAR: <span class="tooltip-number">${r.par}%</span></span>\n                          <span class="tooltip-stack-text">CHA: <span class="tooltip-number">${r.cha}%</span></span>\n                          `).style("top","25%").style("left",n+"px"),L.select(".x-hover-line").attr("transform",`translate(${d.count.x(r.year)},0)`)}),(t=>{const a=d3.axisBottom(d.count.x).tickFormat(d3.format("d")).tickPadding(7).ticks(10);t.select(".axis-x").attr("transform",`translate(0,${o})`).call(a);const e=d3.axisLeft(d.count.y).tickFormat(t=>t+"%").tickSizeInner(-n).ticks(12);t.select(".axis-y").call(e)})(v)};window.addEventListener("resize",()=>{m(p)}),d3.csv(t,(t,e)=>{t?console.log(t):((p=e).forEach(t=>{t.year=t.year,t.par=t.par,t.cha=t.cha}),(()=>{const t=l.select(`.district-ara-${a}-container`);t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","axis axis-y"),t.append("g").attr("class",`district-ara-${a}-container-bis`)})(),(()=>{const t=d3.scaleTime().domain(d3.extent(p,t=>t.year)),a=d3.scaleLinear().domain([0,100]);d.count={x:t,y:a}})(),m(p))})},totalAra=[["csv/total-actur-ara.csv","actur"],["csv/total-aljaferia-ara.csv","aljaferia"],["csv/total-casco-ara.csv","casco"],["csv/total-centro-ara.csv","centro"],["csv/total-delicias-ara.csv","delicias"],["csv/total-las-fuentes-ara.csv","las-fuentes"],["csv/total-san-jose-ara.csv","san-jose"],["csv/total-torrero-ara.csv","torrero"],["csv/total-universidad-ara.csv","universidad"],["csv/total-via-hispanidad-ara.csv","via-hispanidad"],["csv/total-zona-norte-ara.csv","zona-norte"],["csv/total-zona-oeste-ara.csv","zona-oeste"]];for(const t of totalAra)araStack(...t);const gaviotas=()=>{const t=0,a=48,e=24,s=24;let c=0,r=0,n=0,o=0;const i=d3.select(".caida-pp"),l=i.select("svg"),d={};let p;const x=p=>{n=i.node().offsetWidth,c=n-s-a,r=(o=208)-t-e,l.attr("width",n).attr("height",o);const x=`translate(${s},${t})`,u=l.select(".caida-pp-container");u.attr("transform",x),(t=>{d.count.x.range([0,t])})(c);const m=i.select(".caida-pp-container-bis").selectAll(".circles-max").data(p),v=m.enter().append("circle").attr("class","circles-max");m.merge(v).attr("cx",t=>d.count.x(t.diferencia)).attr("cy",r/2).attr("r",0).transition().delay((t,a)=>10*a).duration(500).attr("r",t=>t.total/2).attr("fill","#1FB7FB").attr("fill-opacity",.6),(t=>{const a=d3.axisBottom(d.count.x).tickFormat(t=>t+"%").ticks(6).tickPadding(30);t.select(".axis-x").attr("transform",`translate(0,${r/2})`).call(a)})(u)};window.addEventListener("resize",()=>{x(p)}),d3.csv("csv/caida-pp.csv",(t,a)=>{t?console.log(t):((p=a).forEach(t=>{t.diferencia=t.diferencia,t.total=+t.total}),(()=>{const t=l.select(".caida-pp-container");t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","caida-pp-container-bis")})(),(()=>{const t=d3.scaleLinear().domain([-10,8]),a=d3.scaleLinear().domain([d3.min(p,t=>t.total),d3.max(p,t=>t.total)]);d.count={x:t,y:a}})(),x(p))})};gaviotas();const up=()=>{const t=0,a=48,e=24,s=24;let c=0,r=0,n=0,o=0;const i=d3.select(".caida-up"),l=i.select("svg"),d={};let p;const x=p=>{n=i.node().offsetWidth,c=n-s-a,r=(o=208)-t-e,l.attr("width",n).attr("height",o);const x=`translate(${s},${t})`,u=l.select(".caida-up-container");u.attr("transform",x),(t=>{d.count.x.range([0,t])})(c);const m=i.select(".caida-up-container-bis").selectAll(".circles-max").data(p),v=m.enter().append("circle").attr("class","circles-max");m.merge(v).attr("cx",t=>d.count.x(t.diferencia)).attr("cy",r/2).attr("r",0).transition().delay((t,a)=>10*a).duration(500).attr("r",t=>t.total/2).attr("fill","#BA0D1C").attr("fill-opacity",.6),(t=>{const a=d3.axisBottom(d.count.x).tickFormat(t=>t+"%").ticks(6).tickPadding(30);t.select(".axis-x").attr("transform",`translate(0,${r/2})`).call(a)})(u)};window.addEventListener("resize",()=>{x(p)}),d3.csv("csv/caida-up.csv",(t,a)=>{t?console.log(t):((p=a).forEach(t=>{t.diferencia=t.diferencia,t.total=+t.total}),(()=>{const t=l.select(".caida-up-container");t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","caida-up-container-bis")})(),(()=>{const t=d3.scaleLinear().domain([-10,8]),a=d3.scaleLinear().domain([d3.min(p,t=>t.total),d3.max(p,t=>t.total)]);d.count={x:t,y:a}})(),x(p))})};up();const scatterUP=()=>{const t=24,a=24,e=48,s=72;let c=0,r=0,n=0,o=0;const i=d3.select(".scatter-up"),l=i.select("svg"),d={};let p;const x=p=>{n=i.node().offsetWidth,c=n-s-a,r=(o=600)-t-e,l.attr("width",n).attr("height",o);const x=`translate(${s},${t})`,u=l.select(".scatter-up-container");u.attr("transform",x),((t,a)=>{d.count.x.range([0,t]),d.count.y.range([a,0])})(c,r);const m=i.select(".scatter-up-container-bis").selectAll(".circle-desert").data(p),v=m.enter().append("circle").attr("class","circle-desert");m.merge(v).attr("cx",t=>d.count.x(t.order)).attr("cy",t=>d.count.y(t.up)).attr("r",3).attr("fill","#3B173A").attr("fill-opacity",.8),(t=>{const a=d3.axisBottom(d.count.x).tickFormat(t=>t+"%").ticks(0);t.select(".axis-x").attr("transform",`translate(0,${r})`).call(a);const e=d3.axisLeft(d.count.y).tickFormat(t=>t+"%").tickSize(-c).tickPadding(10).ticks(10);t.select(".axis-y").call(e)})(u)};window.addEventListener("resize",()=>{x(p)}),d3.csv("csv/up.csv",(t,a)=>{t?console.log(t):((p=a).forEach(t=>{t.up=+t.up,t.order=+t.order,t.distrito=+t.distrito}),(()=>{const t=l.select(".scatter-up-container");t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","axis axis-y"),t.append("g").attr("class","scatter-up-container-bis")})(),(()=>{const t=d3.scaleLinear().domain([d3.min(p,t=>t.order),d3.max(p,t=>t.order)]),a=d3.scaleLinear().domain([d3.min(p,t=>1.5*t.up),d3.max(p,t=>1.5*t.up)]);d.count={x:t,y:a}})(),x(p))})};scatterUP();const scatterPP=()=>{const t=24,a=24,e=48,s=72;let c=0,r=0,n=0,o=0;const i=d3.select(".scatter-pp"),l=i.select("svg"),d={};let p;const x=p=>{n=i.node().offsetWidth,c=n-s-a,r=(o=600)-t-e,l.attr("width",n).attr("height",o);const x=`translate(${s},${t})`,u=l.select(".scatter-pp-container");u.attr("transform",x),((t,a)=>{d.count.x.range([0,t]),d.count.y.range([a,0])})(c,r);const m=i.select(".scatter-pp-container-bis").selectAll(".circle-desert").data(p),v=m.enter().append("circle").attr("class","circle-desert");m.merge(v).attr("cx",t=>d.count.x(t.order)).attr("cy",t=>d.count.y(t.pp)).attr("r",3).attr("fill","#1FB7FB"),(t=>{const a=d3.axisBottom(d.count.x).tickFormat(t=>t+"%").ticks(0);t.select(".axis-x").attr("transform",`translate(0,${r})`).call(a);const e=d3.axisLeft(d.count.y).tickFormat(t=>t+"%").tickSize(-c).tickPadding(10).ticks(10);t.select(".axis-y").call(e)})(u)};window.addEventListener("resize",()=>{x(p)}),d3.csv("csv/pp.csv",(t,a)=>{t?console.log(t):((p=a).forEach(t=>{t.pp=+t.pp,t.order=+t.order,t.distrito=+t.distrito}),(()=>{const t=l.select(".scatter-pp-container");t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","axis axis-y"),t.append("g").attr("class","scatter-pp-container-bis")})(),(()=>{const t=d3.scaleLinear().domain([d3.min(p,t=>t.order),d3.max(p,t=>t.order)]),a=d3.scaleLinear().domain([-40,10]);d.count={x:t,y:a}})(),x(p))})};scatterPP();const scatterPSOE=()=>{const t=24,a=24,e=48,s=72;let c=0,r=0,n=0,o=0;const i=d3.select(".scatter-psoe"),l=i.select("svg"),d={};let p;const x=p=>{n=i.node().offsetWidth,c=n-s-a,r=(o=600)-t-e,l.attr("width",n).attr("height",o);const x=`translate(${s},${t})`,u=l.select(".scatter-psoe-container");u.attr("transform",x),((t,a)=>{d.count.x.range([0,t]),d.count.y.range([a,0])})(c,r);const m=i.select(".scatter-psoe-container-bis").selectAll(".circle-desert").data(p),v=m.enter().append("circle").attr("class","circle-desert");m.merge(v).attr("cx",t=>d.count.x(t.order)).attr("cy",t=>d.count.y(t.psoe)).attr("r",3).attr("fill","#E00F20"),(t=>{const a=d3.axisBottom(d.count.x).tickFormat(d3.format("d")).ticks(0);t.select(".axis-x").attr("transform",`translate(0,${r})`).call(a);const e=d3.axisLeft(d.count.y).tickFormat(t=>t+"%").tickSize(-c).tickPadding(10).ticks(10);t.select(".axis-y").call(e)})(u)};window.addEventListener("resize",()=>{x(p)}),d3.csv("csv/psoe.csv",(t,a)=>{t?console.log(t):((p=a).forEach(t=>{t.psoe=+t.psoe,t.order=+t.order,t.distrito=+t.distrito}),(()=>{const t=l.select(".scatter-psoe-container");t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","axis axis-y"),t.append("g").attr("class","scatter-psoe-container-bis")})(),(()=>{const t=d3.scaleLinear().domain([d3.min(p,t=>t.order),d3.max(p,t=>t.order)]),a=d3.scaleLinear().domain([d3.min(p,t=>1.5*t.psoe),d3.max(p,t=>1.5*t.psoe)]);d.count={x:t,y:a}})(),x(p))})};scatterPSOE();const scatterCs=()=>{const t=24,a=24,e=48,s=72;let c=0,r=0,n=0,o=0;const i=d3.select(".scatter-cs"),l=i.select("svg"),d={};let p;const x=p=>{n=i.node().offsetWidth,c=n-s-a,r=(o=600)-t-e,l.attr("width",n).attr("height",o);const x=`translate(${s},${t})`,u=l.select(".scatter-cs-container");u.attr("transform",x),((t,a)=>{d.count.x.range([0,t]),d.count.y.range([a,0])})(c,r);const m=i.select(".scatter-cs-container-bis").selectAll(".circle-desert").data(p),v=m.enter().append("circle").attr("class","circle-desert");m.merge(v).attr("cx",t=>d.count.x(t.order)).attr("cy",t=>d.count.y(t.cs)).attr("r",3).attr("fill","#EE7A3F"),(t=>{const a=d3.axisBottom(d.count.x).tickFormat(t=>t+"%").ticks(0);t.select(".axis-x").attr("transform",`translate(0,${r})`).call(a);const e=d3.axisLeft(d.count.y).tickFormat(t=>t+"%").tickSize(-c).tickPadding(10).ticks(10);t.select(".axis-y").call(e)})(u)};window.addEventListener("resize",()=>{x(p)}),d3.csv("csv/cs.csv",(t,a)=>{t?console.log(t):((p=a).forEach(t=>{t.cs=+t.cs,t.order=+t.order,t.distrito=+t.distrito}),(()=>{const t=l.select(".scatter-cs-container");t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","axis axis-y"),t.append("g").attr("class","scatter-cs-container-bis")})(),(()=>{const t=d3.scaleLinear().domain([d3.min(p,t=>t.order),d3.max(p,t=>t.order)]),a=d3.scaleLinear().domain([d3.min(p,t=>1.5*t.cs),d3.max(p,t=>1.5*t.cs)]);d.count={x:t,y:a}})(),x(p))})};scatterCs();const scatterVox=()=>{const t=24,a=24,e=48,s=72;let c=0,r=0,n=0,o=0;const i=d3.select(".scatter-vox"),l=i.select("svg"),d={};let p;const x=p=>{n=i.node().offsetWidth,c=n-s-a,r=(o=600)-t-e,l.attr("width",n).attr("height",o);const x=`translate(${s},${t})`,u=l.select(".scatter-vox-container");u.attr("transform",x),((t,a)=>{d.count.x.range([0,t]),d.count.y.range([a,0])})(c,r);const m=i.select(".scatter-vox-container-bis").selectAll(".circle-desert").data(p),v=m.enter().append("circle").attr("class","circle-desert");m.merge(v).attr("cx",t=>d.count.x(t.order)).attr("cy",t=>d.count.y(t.vox)).attr("r",3).attr("fill","#6CB83F"),(t=>{const a=d3.axisBottom(d.count.x).tickFormat(t=>t+"%").ticks(0);t.select(".axis-x").attr("transform",`translate(0,${r})`).call(a);const e=d3.axisLeft(d.count.y).tickFormat(t=>t+"%").tickSize(-c).tickPadding(10).ticks(10);t.select(".axis-y").call(e)})(u)};window.addEventListener("resize",()=>{x(p)}),d3.csv("csv/vox.csv",(t,a)=>{t?console.log(t):((p=a).forEach(t=>{t.vox=+t.vox,t.order=+t.order,t.distrito=+t.distrito}),(()=>{const t=l.select(".scatter-vox-container");t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","axis axis-y"),t.append("g").attr("class","scatter-vox-container-bis")})(),(()=>{const t=d3.scaleLinear().domain([d3.min(p,t=>t.order),d3.max(p,t=>t.order)]),a=d3.scaleLinear().domain([0,d3.max(p,t=>1.25*t.vox)]);d.count={x:t,y:a}})(),x(p))})};scatterVox();const ultraDerecha=()=>{const t=24,a=24,e=48,s=72;let c=0,r=0,n=0,o=0;const i=d3.select(".scatter-ultra-derecha"),l=i.select("svg"),d={};let p;const x=p=>{n=i.node().offsetWidth,c=n-s-a,r=(o=600)-t-e,l.attr("width",n).attr("height",o);const x=`translate(${s},${t})`,u=l.select(".scatter-ultra-derecha-container");u.attr("transform",x),((t,a)=>{d.count.x.range([0,t]),d.count.y.range([a,0])})(c,r);const m=i.select(".scatter-ultra-derecha-container-bis"),v=m.selectAll(".circle-desert").data(p),y=v.enter().append("circle").attr("class","circle-desert");v.merge(y).attr("cx",t=>d.count.x(t.order)).attr("cy",t=>d.count.y(t.vox)).attr("r",3).attr("fill","#6CB83F");const f=m.selectAll(".circle-pp").data(p),g=f.enter().append("circle").attr("class","circle-pp");f.merge(g).attr("cx",t=>d.count.x(t.order)).attr("cy",t=>d.count.y(t.pp)).attr("r",3).attr("fill","#2DB8F8"),(t=>{const a=d3.axisBottom(d.count.x).tickFormat(t=>t+"%").ticks(0);t.select(".axis-x").attr("transform",`translate(0,${r})`).call(a);const e=d3.axisLeft(d.count.y).tickFormat(t=>t+"%").tickSize(-c).tickPadding(10).ticks(10);t.select(".axis-y").call(e)})(u)};window.addEventListener("resize",()=>{x(p)}),d3.csv("csv/pp.csv",(t,a)=>{t?console.log(t):((p=a).forEach(t=>{t.vox=+t.vox,t.pp=+t.pp,t.order=+t.order,t.distrito=+t.distrito}),(()=>{const t=l.select(".scatter-ultra-derecha-container");t.append("g").attr("class","axis axis-x"),t.append("g").attr("class","axis axis-y"),t.append("g").attr("class","scatter-ultra-derecha-container-bis")})(),(()=>{const t=d3.scaleLinear().domain([d3.min(p,t=>t.order),d3.max(p,t=>t.order)]),a=d3.scaleLinear().domain([-40,30]);d.count={x:t,y:a}})(),x(p))})};ultraDerecha();