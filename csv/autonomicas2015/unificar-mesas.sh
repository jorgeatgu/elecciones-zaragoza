#!/usr/local/bin/bash

mesas=('1-001' '1-002' '1-003' '1-004' '1-005' '1-006' '1-008' '1-009' '1-012' '1-015' '1-017' '1-019' '1-020' '1-021' '1-023' '1-024' '1-025' '1-026' '1-027' '1-030' '1-031' '1-032' '1-033' '1-034' '1-036' '1-038' '1-039' '1-040' '1-041' '1-043' '10-001' '10-002' '10-003' '10-004' '10-005' '10-006' '10-008' '10-009' '10-010' '10-011' '10-012' '10-013' '10-014' '10-015' '10-016' '10-017' '10-018' '10-019' '10-020' '10-021' '10-023' '10-024' '10-025' '10-026' '10-027' '10-028' '10-029' '10-030' '10-031' '10-032' '10-033' '10-034' '10-035' '10-036' '10-037' '10-038' '10-039' '10-040' '10-041' '10-042' '10-043' '10-044' '10-045' '10-046' '10-047' '10-048' '10-049' '10-050' '10-051' '10-052' '10-053' '10-054' '10-055' '10-056' '10-057' '10-058' '10-059' '10-060' '10-061' '10-062' '10-063' '10-064' '10-065' '10-066' '10-067' '10-068' '10-069' '10-070' '10-071' '10-072' '10-073' '10-074' '10-075' '10-076' '10-077' '10-078' '10-079' '10-080' '10-081' '10-082' '10-083' '10-084' '10-085' '10-086' '10-087' '10-088' '10-089' '10-090' '10-091' '11-001' '11-002' '11-003' '11-004' '11-006' '11-007' '11-008' '11-009' '11-010' '11-011' '11-012' '11-013' '11-015' '11-016' '11-017' '11-018' '11-019' '12-001' '12-002' '12-003' '12-004' '12-005' '12-006' '12-007' '12-008' '12-009' '12-010' '2-001' '2-002' '2-003' '2-004' '2-005' '2-006' '2-008' '2-009' '2-010' '2-012' '2-013' '2-014' '2-015' '2-017' '2-018' '2-019' '2-020' '2-021' '2-022' '2-023' '2-024' '2-025' '2-026' '2-027' '2-028' '2-029' '2-030' '2-031' '2-032' '2-033' '2-035' '2-036' '2-037' '2-038' '2-040' '2-042' '2-045' '2-046' '2-047' '2-048' '2-049' '2-050' '2-051' '2-052' '2-053' '3-001' '3-002' '3-003' '3-004' '3-005' '3-007' '3-008' '3-009' '3-010' '3-011' '3-012' '3-014' '3-015' '3-016' '3-017' '3-018' '3-019' '3-020' '3-021' '3-022' '3-023' '3-024' '3-025' '3-026' '3-027' '3-028' '3-029' '3-030' '3-031' '3-032' '3-033' '3-034' '3-035' '3-036' '3-037' '3-038' '3-039' '3-040' '3-041' '3-042' '3-043' '3-044' '3-045' '3-046' '3-047' '3-048' '3-049' '3-051' '3-052' '3-053' '3-054' '3-055' '3-056' '3-057' '3-058' '3-060' '3-061' '3-062' '3-063' '3-064' '3-065' '3-066' '3-067' '3-068' '3-069' '3-070' '3-071' '3-073' '3-074' '3-075' '3-076' '3-077' '3-078' '3-079' '3-080' '3-081' '3-082' '3-083' '3-084' '3-085' '3-086' '3-087' '3-088' '3-089' '3-090' '4-001' '4-002' '4-003' '4-004' '4-005' '4-006' '4-007' '4-008' '4-009' '4-010' '4-011' '4-012' '4-013' '4-014' '4-015' '4-016' '4-017' '4-018' '4-021' '4-023' '4-024' '4-025' '4-027' '4-028' '4-029' '4-031' '4-033' '4-034' '4-035' '4-036' '4-037' '4-038' '4-039' '4-040' '4-041' '4-042' '4-043' '4-044' '4-045' '4-046' '4-048' '4-049' '4-051' '4-052' '4-053' '4-054' '4-055' '4-056' '4-057' '4-058' '4-059' '4-060' '4-061' '4-062' '4-063' '4-064' '4-065' '4-066' '4-067' '4-068' '4-069' '4-070' '5-001' '5-002' '5-003' '5-004' '5-005' '5-006' '5-007' '5-008' '5-009' '5-010' '5-011' '5-012' '5-013' '5-014' '5-015' '5-016' '5-017' '5-018' '5-019' '5-020' '5-021' '5-022' '5-023' '5-024' '5-025' '5-026' '5-027' '5-028' '5-030' '5-031' '5-032' '5-033' '5-034' '5-036' '5-037' '5-038' '5-039' '5-040' '5-041' '5-042' '5-043' '5-044' '5-045' '5-046' '5-047' '5-048' '5-049' '5-050' '6-001' '6-002' '6-003' '6-004' '6-005' '6-006' '6-007' '6-008' '6-009' '6-010' '6-011' '6-013' '6-014' '6-015' '6-016' '6-017' '6-018' '6-019' '6-020' '6-021' '6-022' '6-024' '6-025' '6-026' '6-027' '6-028' '6-029' '6-030' '6-031' '6-032' '6-033' '6-034' '6-035' '6-036' '6-037' '6-038' '6-039' '7-001' '7-002' '7-003' '7-004' '7-005' '7-006' '7-007' '7-008' '7-009' '7-014' '7-015' '7-016' '7-017' '7-018' '7-019' '7-020' '8-001' '8-002' '8-003' '8-004' '8-005' '8-006' '8-007' '8-008' '8-009' '8-010' '8-011' '8-012' '8-013' '8-014' '8-015' '8-016' '8-017' '8-018' '8-019' '8-020' '8-021' '8-022' '8-023' '8-024' '8-025' '9-001' '9-002' '9-003' '9-004' '9-005' '9-006' '9-007' '9-008' '9-009' '9-010' '9-012' '9-013' '9-014' '9-015' '9-016' '9-017' '9-018' '9-019' '9-020' '9-021' '9-022' '9-023' '9-024' '9-025' '9-026' '9-027' '9-028' )

# Recorremos el array de poblacion
for (( i=0; i<${#mesas[@]}; ++i )); do
    csvgrep -c 1 -r "^${mesas[$i]}" zaragoza-mesa-2015.csv | csvstat -c 2,3,4,5,6,7,8,9 --sum > "${mesas[$i]}".csv &&
    sed -i "s/: /,/g" "${mesas[$i]}".csv &&
    sed -i "s/  2. Total//g" "${mesas[$i]}".csv &&
    sed -i "s/  3. PSOE//g" "${mesas[$i]}".csv &&
    sed -i "s/  4. CHA//g" "${mesas[$i]}".csv &&
    sed -i "s/  5. IU//g" "${mesas[$i]}".csv &&
    sed -i "s/  6. PP//g" "${mesas[$i]}".csv &&
    sed -i "s/  7. PAR//g" "${mesas[$i]}".csv &&
    sed -i "s/  8. PODEMOS//g" "${mesas[$i]}".csv &&
    sed -i "s/  9. CIUDADANO//g" "${mesas[$i]}".csv &&
    sed -i ':a;N;$!ba;s/\n//g' "${mesas[$i]}".csv &&
    sed -i '1s/^/distrito,total,PSOE,CHA,IU,PP,PAR,PODEMOS,CIUDADANOS\n/' "${mesas[$i]}".csv &&
    sed -i "2s/^/${mesas[$i]}/" "${mesas[$i]}".csv
done

